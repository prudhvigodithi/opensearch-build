lib = library(identifier: 'jenkins@20211123', retriever: legacySCM(scm))

pipeline {
    options {
        timeout(time: 30)
    }
    agent none  
    stages {
        stage("Job") {
            agent {
                docker {
                    label 'Jenkins-Agent-al2-x64-c54xlarge-Docker-Host'
                    image 'opensearchstaging/ci-runner:ubuntu2004-x64-docker-buildx0.6.3-qemu5.0-awscli1.22-jdk11-v2'
                    args '-u root -v /var/run/docker.sock:/var/run/docker.sock'
                }
            }
            stages {
                stage('Image sync') {
                    steps {
                        script {
                                def ecrLogin = sh(returnStdout: true, script: "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws/opensearchstaging").trim()
                                sh """
                                        grcrane cp opensearchstaging/opensearch-dashboards:2.1.0 public.ecr.aws/opensearchstaging/opensearch-dashboards:2.1.0
                                        grcrane cp opensearchstaging/opensearch-dashboards:3.0.0 public.ecr.aws/opensearchstaging/opensearch-dashboards:3.0.0
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.3.3 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.3.3
                                        grcrane cp opensearchstaging/opensearch-dashboards:2.0.0.3936 public.ecr.aws/opensearchstaging/opensearch-dashboards:2.0.0.3936
                                        grcrane cp opensearchstaging/opensearch-dashboards:2.0.0 public.ecr.aws/opensearchstaging/opensearch-dashboards:2.0.0
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.3.2.3032 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.3.2.3032
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.3.2 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.3.2
                                        grcrane cp opensearchstaging/opensearch-dashboards:2.0.0-rc1 public.ecr.aws/opensearchstaging/opensearch-dashboards:2.0.0-rc1
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.3.1 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.3.1
                                        grcrane cp opensearchstaging/opensearch-dashboards:2.0.0-alpha1 public.ecr.aws/opensearchstaging/opensearch-dashboards:2.0.0-alpha1
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.4.0 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.4.0
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.3.0 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.3.0
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.2.0-testfix public.ecr.aws/opensearchstaging/opensearch-dashboards:1.2.0-testfix
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.1.1 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.1.1
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.2.0 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.2.0
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.1.0-multi-test public.ecr.aws/opensearchstaging/opensearch-dashboards:1.1.0-multi-test
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.0.1 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.0.1
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.0.0-multi-test public.ecr.aws/opensearchstaging/opensearch-dashboards:1.0.0-multi-test
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.0.0-reducesize public.ecr.aws/opensearchstaging/opensearch-dashboards:1.0.0-reducesize
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.0.0 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.0.0
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.0.0-rc1 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.0.0-rc1
                                        grcrane cp opensearchstaging/opensearch-dashboards:1.0.0-beta1 public.ecr.aws/opensearchstaging/opensearch-dashboards:1.0.0-beta1


                                        grcrane cp opensearchstaging/opensearch:2.1.0 public.ecr.aws/opensearchstaging/opensearch:2.1.0
                                        grcrane cp opensearchstaging/opensearch:3.0.0 public.ecr.aws/opensearchstaging/opensearch:3.0.0
                                        grcrane cp opensearchstaging/opensearch:1.3.3 public.ecr.aws/opensearchstaging/opensearch:1.3.
                                        grcrane cp opensearchstaging/opensearch:2.0.0.3810 public.ecr.aws/opensearchstaging/opensearch:2.0.0.3810
                                        grcrane cp opensearchstaging/opensearch:2.0.0 public.ecr.aws/opensearchstaging/opensearch:2.0.0
                                        grcrane cp opensearchstaging/opensearch:1.3.2.2713 public.ecr.aws/opensearchstaging/opensearch:1.3.2.2713
                                        grcrane cp opensearchstaging/opensearch:1.3.2 public.ecr.aws/opensearchstaging/opensearch:1.3.2
                                        grcrane cp opensearchstaging/opensearch:2.0.0-rc1 public.ecr.aws/opensearchstaging/opensearch:2.0.0-rc1
                                        grcrane cp opensearchstaging/opensearch:2.0.0-alpha1 public.ecr.aws/opensearchstaging/opensearch:2.0.0-alpha1
                                        grcrane cp opensearchstaging/opensearch:1.3.1 public.ecr.aws/opensearchstaging/opensearch:1.3.1
                                        grcrane cp opensearchstaging/opensearch:1.3.0 public.ecr.aws/opensearchstaging/opensearch:1.3.0
                                        grcrane cp opensearchstaging/opensearch:1.4.0 public.ecr.aws/opensearchstaging/opensearch:1.4.0
                                        grcrane cp opensearchstaging/opensearch:1.2.5 public.ecr.aws/opensearchstaging/opensearch:1.2.5
                                        grcrane cp opensearchstaging/opensearch:1.2.4 public.ecr.aws/opensearchstaging/opensearch:1.2.4
                                        grcrane cp opensearchstaging/opensearch:1.2.2 public.ecr.aws/opensearchstaging/opensearch:1.2.2
                                        grcrane cp opensearchstaging/opensearch:1.2.1 public.ecr.aws/opensearchstaging/opensearch:1.2.1
                                        grcrane cp opensearchstaging/opensearch:1.2.3 public.ecr.aws/opensearchstaging/opensearch:1.2.3
                                        grcrane cp opensearchstaging/opensearch:1.2.0 public.ecr.aws/opensearchstaging/opensearch:1.2.0
                                        grcrane cp opensearchstaging/opensearch:1.2.4-testfix public.ecr.aws/opensearchstaging/opensearch:1.2.4-testfix
                                        grcrane cp opensearchstaging/opensearch:1.1.0 public.ecr.aws/opensearchstaging/opensearch:1.1.0
                                        grcrane cp opensearchstaging/opensearch:1.1.1 public.ecr.aws/opensearchstaging/opensearch:1.1.1
                                        grcrane cp opensearchstaging/opensearch:1.1.0-multi-test public.ecr.aws/opensearchstaging/opensearch:1.1.0-multi-test
                                        grcrane cp opensearchstaging/opensearch:1.0.1 public.ecr.aws/opensearchstaging/opensearch:1.0.1
                                        grcrane cp opensearchstaging/opensearch:1.0.0-multi-test public.ecr.aws/opensearchstaging/opensearch:1.0.0-multi-test
                                        grcrane cp opensearchstaging/opensearch:1.0.0-reducesize public.ecr.aws/opensearchstaging/opensearch:1.0.0-reducesize
                                        grcrane cp opensearchstaging/opensearch:1.0.0 public.ecr.aws/opensearchstaging/opensearch:1.0.0
                                        grcrane cp opensearchstaging/opensearch:1.0.0-rc1 public.ecr.aws/opensearchstaging/opensearch:1.0.0-rc1
                                        grcrane cp opensearchstaging/opensearch:1.0.0-beta1 public.ecr.aws/opensearchstaging/opensearch:1.0.0-beta1

                                        grcrane cp opensearchstaging/ci-runner:ci-runner-rockylinux8-opensearch-build-v2 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-rockylinux8-opensearch-build-v2
                                        grcrane cp opensearchstaging/ci-runner:ubuntu2004-x64-docker-buildx0.6.3-qemu5.0-awscli1.22-jdk11-v2 public.ecr.aws/opensearchstaging/ci-runner:ubuntu2004-x64-docker-buildx0.6.3-qemu5.0-awscli1.22-jdk11-v2
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-rockylinux8-opensearch-dashboards-integtest-v2 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-rockylinux8-opensearch-dashboards-integtest-v2
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-centos7-opensearch-build-v2 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-centos7-opensearch-build-v2
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-centos7-opensearch-dashboards-build-v2 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-centos7-opensearch-dashboards-build-v2
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-centos7-systemd-base-integtest-v1 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-centos7-systemd-base-integtest-v1
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-centos7-opensearch-dashboards-build-v1 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-centos7-opensearch-dashboards-build-v1
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-centos7-opensearch-build-v1 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-centos7-opensearch-build-v1
                                        grcrane cp opensearchstaging/ci-runner:alpine-test public.ecr.aws/opensearchstaging/ci-runner:alpine-test
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-ubuntu1804-build-v1 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-ubuntu1804-build-v1
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-ubuntu2004-data-prepper-pipeline-v1 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-ubuntu2004-data-prepper-pipeline-v1
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-rockylinux8-opensearch-dashboards-integtest-v1 public.ecr.aws/opensearchstaging/ci-runner-rockylinux8-opensearch-dashboards-integtest-v1
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-centos7-opensearch-dashboards-build public.ecr.aws/opensearchstaging/ci-runner:ci-runner-centos7-opensearch-dashboards-build
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-centos7-v1 public.ecr.aws/opensearchstaging/ci-runner:ci-runner-centos7-v1
                                        grcrane cp opensearchstaging/ci-runner:ci-runner-centos7-test public.ecr.aws/opensearchstaging/ci-runner:ci-runner-centos7-test
                                        grcrane cp opensearchstaging/ci-runner:ubuntu2004-x64-docker-buildx0.6.3-qemu5.0-awscli1.22-jdk14 public.ecr.aws/opensearchstaging/ci-runner:ubuntu2004-x64-docker-buildx0.6.3-qemu5.0-awscli1.22-jdk14
                                        grcrane cp opensearchstaging/ci-runner:centos7-x64-arm64-jdkmulti-node10.24.1-cypress6.9.1-20211130 public.ecr.aws/opensearchstaging/ci-runner:centos7-x64-arm64-jdkmulti-node10.24.1-cypress6.9.1-20211130
                                        grcrane cp opensearchstaging/ci-runner:ubuntu2004-x64-docker-buildx0.6.3-qemu5.0 public.ecr.aws/opensearchstaging/ci-runner:ubuntu2004-x64-docker-buildx0.6.3-qemu5.0
                                        grcrane cp opensearchstaging/ci-runner:centos7-x64-arm64-jdkmulti-node10.24.1-cypress6.9.1-20211028 public.ecr.aws/opensearchstaging/ci-runner:centos7-x64-arm64-jdkmulti-node10.24.1-cypress6.9.1-20211028
                                        grcrane cp opensearchstaging/ci-runner:al2-x64-arm64-jdkmulti-node10.24.1-cypress6.9.1-20211019 public.ecr.aws/opensearchstaging/ci-runner:al2-x64-arm64-jdkmulti-node10.24.1-cypress6.9.1-20211019

                                        grcrane cp opensearchstaging/data-prepper:1.2.1 public.ecr.aws/opensearchstaging/data-prepper:1.2.1
                                        grcrane cp opensearchstaging/data-prepper:1.2.0 public.ecr.aws/opensearchstaging/data-prepper:1.2.0
                                        grcrane cp opensearchstaging/data-prepper:1.1.1 public.ecr.aws/opensearchstaging/data-prepper:1.1.1
                                        grcrane cp opensearchstaging/data-prepper:1.1.0 public.ecr.aws/opensearchstaging/data-prepper:1.1.0
                                        grcrane cp opensearchstaging/data-prepper:1.0.0 public.ecr.aws/opensearchstaging/data-prepper:1.0.0

                                        grcrane cp opensearchstaging/logstash-oss-with-opensearch-output-plugin:7.13.4 public.ecr.aws/opensearchstaging/logstash-oss-with-opensearch-output-plugin:7.13.4
                                        grcrane cp opensearchstaging/logstash-oss-with-opensearch-output-plugin:7.13.2 public.ecr.aws/opensearchstaging/logstash-oss-with-opensearch-output-plugin:7.13.2
                                """
                            }
                        }
                    }
                }
            }
        }
    }

